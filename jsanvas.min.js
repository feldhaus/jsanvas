function Vector2(t,e){this.x=t||0,this.y=e||0}function DisplayObject(t,e){this.visible=!0,this.fillStyle="white",this.lineWidth=1,this.strokeStyle="black",this.rotation=0,Vector2.call(this,t||0,e||0)}function Rect(t,e,n,s){DisplayObject.call(this,t,e),this.width=n,this.height=s}function Circle(t,e,n){DisplayObject.call(this,t,e),this.radius=n}function Line(){DisplayObject.call(this),this.lineWidth=1,this.fillStyle=null,this.points=[];for(var t=0;t<arguments.length;t+=2)this.points.push(new Vector2(arguments[t],arguments[t+1]))}function Img(t,e,n,s,i){Vector2.call(this,e,n),this.width=s,this.height=i,parent=this,this.img=new Image,this.img.src=t,this.img.onload=function(){parent.render()}}const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;var jsanvas={};jsanvas.objects=[],Object.defineProperty(jsanvas,"canvasID",{set:function(t){this.canvas=document.getElementById(t),this.context=this.canvas.getContext("2d")}}),Object.defineProperty(jsanvas,"center",{get:function(){return new Vector2(this.width/2,this.height/2)}}),Object.defineProperty(jsanvas,"width",{get:function(){return this.canvas.width}}),Object.defineProperty(jsanvas,"height",{get:function(){return this.canvas.height}}),jsanvas.render=function(){this.context.clearRect(0,0,this.width,this.height);for(var t=0;t<this.objects.length;t++)this.objects[t].visible&&this.objects[t].render()},jsanvas.remove=function(t){var e=this.objects.indexOf(t);-1!=e&&this.objects.splice(e,1)},jsanvas.newRect=function(t,e,n,s){var i=new Rect(t,e,n,s);return this.objects.push(i),i},jsanvas.newCircle=function(t,e,n){var s=new Circle(t,e,n);return this.objects.push(s),s},jsanvas.newLine=function(){var t=Object.create(Line.prototype);return Line.apply(t,arguments),this.objects.push(t),t},jsanvas.newImage=function(t,e,n,s,i){var o=new Img(t,e,n,s,i);return this.objects.push(o),o},Vector2.prototype={add:function(t){return t instanceof Vector2?(this.x+=t.x,this.y+=t.y):(this.x+=t,this.y+=t),this},sub:function(t){return t instanceof Vector2?(this.x-=t.x,this.y-=t.y):(this.x-=t,this.y-=t),this},mult:function(t){return t instanceof Vector2?(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=t),this},div:function(t){return t instanceof Vector2?(this.x/=t.x,this.y/=t.y):(this.x/=t,this.y/=t),this},equals:function(t){return this.x==t.x&&this.y==t.y},angleTo:function(t){return Math.atan2(t.y-this.y,t.x-this.x)},sqrDistance:function(t){return Vector2.sub(this,t).sqrMagnitude},distance:function(t){return Math.sqrt(this.sqrDistance(t))},clone:function(){return new Vector2(this.x,this.y)},toString:function(){return"Vector2 ("+this.x+", "+this.y+") "}},Object.defineProperty(Vector2.prototype,"sqrMagnitude",{get:function(){return this.x*this.x+this.y*this.y}}),Object.defineProperty(Vector2.prototype,"magnitude",{get:function(){return Math.sqrt(this.sqrMagnitude)}}),Object.defineProperty(Vector2.prototype,"normalized",{get:function(){var t=this.magnitude;return t>0?this.clone().div(t):Vector2.zero}}),Vector2.add=function(t,e){return e instanceof Vector2?new Vector2(t.x+e.x,t.y+e.y):new Vector2(t.x+e,t.y+e)},Vector2.sub=function(t,e){return e instanceof Vector2?new Vector2(t.x-e.x,t.y-e.y):new Vector2(t.x-e,t.y-e)},Vector2.mult=function(t,e){return e instanceof Vector2?new Vector2(t.x*e.x,t.y*e.y):new Vector2(t.x*e,t.y*e)},Vector2.div=function(t,e){return e instanceof Vector2?new Vector2(t.x/e.x,t.y/e.y):new Vector2(t.x/e,t.y/e)},Vector2.angleBetween=function(t,e){return t.angleTo(e)},Object.defineProperty(Vector2,"zero",{get:function(){return new Vector2}}),DisplayObject.prototype=new Vector2,Rect.prototype=new DisplayObject,Rect.prototype.render=function(){jsanvas.context.save(),jsanvas.context.translate(this.x,this.y),jsanvas.context.rotate(this.rotation*DEG2RAD),jsanvas.context.beginPath(),jsanvas.context.rect(-this.width/2,-this.height/2,this.width,this.height),jsanvas.context.fillStyle=this.fillStyle,jsanvas.context.fill(),this.lineWidth>0&&(jsanvas.context.lineWidth=this.lineWidth,jsanvas.context.strokeStyle=this.strokeStyle,jsanvas.context.stroke()),jsanvas.context.restore()},Circle.prototype=new DisplayObject,Circle.prototype.render=function(){jsanvas.context.beginPath(),jsanvas.context.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),this.fillStyle&&(jsanvas.context.fillStyle=this.fillStyle,jsanvas.context.fill()),this.lineWidth>0&&(jsanvas.context.lineWidth=this.lineWidth,jsanvas.context.strokeStyle=this.strokeStyle,jsanvas.context.stroke())},Line.prototype=new DisplayObject,Line.prototype.render=function(){if(jsanvas.context.beginPath(),this.points.length>1){jsanvas.context.moveTo(this.points[0].x,this.points[0].y);for(var t=1;t<this.points.length;t++)jsanvas.context.lineTo(this.points[t].x,this.points[t].y)}this.fillStyle&&(jsanvas.context.fillStyle=this.fillStyle,jsanvas.context.fill()),jsanvas.context.lineWidth=this.lineWidth>0?this.lineWidth:1,jsanvas.context.strokeStyle=this.strokeStyle,jsanvas.context.stroke()},Line.prototype.append=function(){for(var t=0;t<arguments.length;t+=2)this.points.push(new Vector2(arguments[t],arguments[t+1]))},Img.prototype=new Vector2,Img.prototype.render=function(){jsanvas.context.save(),jsanvas.context.translate(this.x,this.y),jsanvas.context.rotate(this.rotation*DEG2RAD),jsanvas.context.drawImage(this.img,0,0,this.width,this.height),jsanvas.context.restore()};